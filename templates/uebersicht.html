{% extends "basic.html" %}

{% block title %}
<title>Übersicht</title>

{% endblock %}

{% block body %}

<h2>Übersicht erfasste Zeit</h2>

{% if zeiterfassung %} <!-- Falls Zeiten bereits erfasst wurden -->

<table>
    <tr>
        <th style="width:250px;"><form method="POST"> <!-- Filter -->
            <select name="gefilterte_kategorie">
                <option selected>{{ gefilterte_kategorie }}</option>
                <option>Alle</option>
                {% for kategorie in kategorien %}
                <option value="{{ kategorie }}">{{ kategorie }}</option>  <!-- Alle Kategorien werden als Optionen im Dropdown aufgeführt -->
                {% endfor %}
            </select>
            <button type="submit">Filtern</button></form></th>
         <th>Total: {{ summe }}</th>
    </tr>
</table>
<br>

<table class="table">
    <thead>
        <tr>
            <th scope="col">Datum, Erfassungszeit</th>
            <th scope="col">Kategorie</th>
            <th scope="col">Zeit</th>
            <th scope="col">Anpassen</th>
        </tr>
    </thead>

{% for key, value in zeiterfassung.items() %}  <!-- For-Schleife iteriert durch den Dict -->
    <tbody>
        <tr style="background-color:{{ farben[value[0]] }}">  <!-- Jede Kategorie hat eigene Hintergrundfarbe -->
            <td>{{ key }}</td>  <!-- Key = Datum, Erfassungszeit -->
            <td>{{ value[0] }}</td>  <!-- Value[0] = Kategorie -->
            <td>{{ value[1] }}</td>  <!-- Value[1] = Zeit -->
            <td><a href="/aendern/{{ key }}">Ändern</a> <a href="/loeschen/{{ key }}">Löschen</a></td>  <!-- Key kommt aus main.py -->
        </tr>
    </tbody>
{% endfor %}
</table>

{% else %}
	<!-- Falls noch keine Zeiten erfasst wurden -->         <!-- ACHTUNG TABELLE DOPPELT -->
<table>
    <tr>
        <th style="width:250px;"><form method="POST"> <!-- Filter -->
            <select name="gefilterte_kategorie">
                <option selected>{{ gefilterte_kategorie }}</option>
                {% for kategorie in kategorien %}
                <option value="{{ kategorie }}">{{ kategorie }}</option>  <!-- Alle Kategorien werden als Optionen im Dropdown aufgeführt -->
                {% endfor %}
            </select>
            <button type="submit">Filtern</button></form></th>
        <th>Total: {{ summe }}</th>
    </tr>
</table>
<br>
    <p>Es wurden noch keine Zeiten erfasst. Erfassen Sie Ihre Zeit <a href="/">hier</a>.</p>

{% endif %}

{% endblock %}
